import { normalizeImagePath } from 'rspress/runtime';

# 🧪 测试助手(Pro)

:::warning{title="💡 小提示"}

 - 测试助手一定不能在线上使用，请严格按照示例集成，仅在 `debug` 模式下加载
 - 为了方便已最大限度的集成到插件中了，iOS 零配置，Android 仅需引入 aar 即可
 - [参考官方文档](https://www.csjplatform.com/union/media/union/download/detail?id=142&docId=27626&osType=android)
 - `请使用真机测试，不要使用模拟器`
 - Pro 版客户，如有问题随时联系我，提供配置指导

:::

## 强大作用

很多人会忽略这个功能，可视化测试助手主要有 2 个作用来保证你上线后广告没啥问题。

- GroMore 一般我们会集成多厂商，SDK 兼容性情况一目了然
- 每个广告位瀑布流中有多个代码位，一般测试展示价格最高的，很难精准控制测试，可视化测试可每个代码位进行测试

## 演示视频

<video src={normalizeImagePath('/imgs/view/video_test.mp4')}  width='260px' controls />

## Android 配置

> 先将插件中依赖 `android/libs/tools-release.aar` 复制到自己项目下的 `android/app/libs/` 文件夹中，然后配置以下 `debug` 模式下的依赖引用

```dart title="example/android/app/build.gradle"
dependencies {
    // 测试工具(这里仅 debug 模式下引用，正式项目用这种模式)
    debugImplementation files('libs/tools-release.aar')
}
```

## iOS 配置

无需配置，插件中已默认开发模式下集成，上线不会增加安装包大小

## 启动可视化测试助手

```dart title="example/pages/home_page.dart"
FlutterGromoreAds.launchTestTools();
```

## 常见错误

- 组件冲突了

``` java
[INSTALL_FAILED_CONFLICTING_PRVIDER: scaning Failed.: can't install,sbecause provider name .ToolsProvider (in package xxx) is already used by com.flutterads.app]
```

> 卸载掉我的示例或者穿山甲示例 App 即可重新安装。

## 常见问题

- AAPT: statusBarBackground not found

原因是 `tools-release.aar` 有个属性错误，新版 AAPT 没通过检查，覆盖样式即可解决

``` dart title="example/android/src/main/res/values/themes.xml"

<!-- 覆盖掉测试助手报错 statusBarBackground' not found-->
<style name="BottomDialog">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">false</item>
    <!-- Remove statusBarBackground -->
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:windowTranslucentStatus">true</item>
</style>
```

